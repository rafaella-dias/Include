{% extends "base.html" %}

{% block title %}Perfil{% endblock %}

{% block content %}
  <main class="main-container">

    <section class="profile-page">
        <div class="content-card">
            <aside class="profile-card">
                {% if current_user.public_id %}
                    <img src="{{current_user.foto_url}}" alt="Foto de perfil">

                {% else %}
                    <img src="static/images/default.png" alt="Foto de perfil padrÃ£o">    

                {% endif %}

                <div class="user-info">
                    <h2>{{ current_user.nome_completo }}</h2>
                    <h3>{{ current_user.nome_usuario }}</h3>
                    <h3>{{ current_user.email}}</h3>
                    <p>{{ current_user.descricao if current_user.descricao else ' ' }}</p>

                </div>


                <div class="profile-actions">
                    <a href="{{ url_for('editar_perfil' ) }}" class="btn btn-primary">Editar perfil</a>
                    <a href="{{ url_for('logout' ) }}" class="btn btn-secondary">Sair</a>

                </div>

            </aside>

            <div class="content-area">
                <header class="content-header">
                    <h2>ConteÃºdos Publicados</h2>

                    <div class="publish-wrapper">
                        <a href="{{ url_for('publicar') }}" class="publish-btn" title="Adicionar ConteÃºdo">
                        +
                        </a>

                    </div>


                </header>

                <div class="atividade-lista">
                    {% if atividades %}
                        {% for atividade in atividades %}
                            <div class="atividade-card">
                                <div class="preview">
                                    {% if atividade.arquivos %}
                                    <img src="{{ atividade.arquivos[0].arquivo_url }}" alt="Preview da atividade">
                                    
                                    {% else %}
                                    <div class="Preview-vazio">Sem preview</div>
                                    
                                    {% endif %}

                                </div>

                                <div class="info">
                                    <h3>{{ atividade.titulo }}</h3>
                                    <p class="materia">{{ atividade.materia.nome }}</p>

                                </div>

                                <div class="acoes">
                                    <a href="{{ atividade.arquivos[0].arquivo_url }}" 
                                        target="_blank" 
                                        class="btn-icon"
                                        title="Baixar">
                                        â¬‡
                                    </a>

                                    <form action="{{ url_for('excluir_atividade', id=atividade.id_atividade) }}" method="POST">
                                        <button type="submit" class="btn-icon btn-icon-danger" title="Excluir">
                                        ðŸ—‘
                                        </button>

                                    </form>
                                
                                </div>

                            </div>
                        {% endfor %}

                    {% else %}
                        <p>Nenhum conteÃºdo publicado ainda.</p>

                    {% endif %}
                </div>

            </div>

        </div>

    </section>

{% endblock %}